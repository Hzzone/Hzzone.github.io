百度云深度学习不能保存镜像，但胜在价格便宜。

相对来说腾讯云最便宜的 14￥ ，阿里云最低 9￥ (且需要最低余额 100￥)，AWS p2.xlarge 最低大概 6-7￥，需要申请实例限制和国外信用卡，但是胜在有很多配好环境的实例。

百度云深度学习每次都要配置环境，而我需要使用 pytorch，为了简化步骤，特此记录。

### 简介
* 最低余额 20 元
* tensorflow 1.2.0
* GPU 计算K1型（ CPU: 6核、 GPU:1 Nvidia K40、 内存: 40GB、 硬盘: 200GB ）
* GPU Total memory: 11.17GiB
* ￥5.16/小时

### 环境
* Ubuntu 14.04.5 LTS
* CUDA Version 8.0.61
* Python 3.4.3/Python 2.7.6

不幸的是，pytorch 只支持 Python 2.7/3.5/3.6，所以需要安装 >3.5 的版本，我安装 `mini conda` 配置 python 3.6：

```shell
wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
sudo sh Miniconda3-latest-Linux-x86_64.sh
source ~/.bashrc
python -V
Python 3.6.5 :: Anaconda, Inc.
pip -V
pip 10.0.1 from /root/miniconda3/lib/python3.6/site-packages/pip (python 3.6)
```

之后就是使用 rsync 来同步文件，如果数据比较大，可以使用百度的 BOS，推荐 [rsync教程](https://www.cnblogs.com/kidsitcn/p/4645372.html)。

最后安装依赖。

### 使用tensorboard可视化

```shell
### 服务器启动tensorboard：
tensorboard --logdir runs
ssh -L 16006:127.0.0.1:6006 account@ip
```

本地访问 http://127.0.0.1:16006/ 查看。

### Python 3.4.3预装的Package

* `pip3 list`

```shell
Package                 Version
----------------------- ----------------
backports.weakref       1.0rc1
bleach                  1.5.0
chardet                 2.2.1
colorama                0.2.5
command-not-found       0.3
defer                   1.0.6
html5lib                0.9999999
Keras                   2.0.4
language-selector       0.1
Markdown                2.2.0
numpy                   1.13.0
pandas                  0.20.2
pip                     9.0.1
protobuf                3.3.0
pycurl                  7.19.3
pygobject               3.12.0
python-apt              0.9.3.5ubuntu2
python-dateutil         2.6.0
pytz                    2017.2
pyxdg                   0.25
PyYAML                  3.12
requests                2.2.1
scikit-learn            0.18.1
scipy                   0.19.0
screen-resolution-extra 0.0.0
setuptools              36.0.1
six                     1.10.0
tensorflow-gpu          1.2.0
Theano                  0.9.0
ufw                     0.34-rc-0ubuntu2
unattended-upgrades     0.1
urllib3                 1.7.1
Werkzeug                0.12.2
wheel                   0.29.0
xkit                    0.0.0
```